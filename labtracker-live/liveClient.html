<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <link rel="stylesheet" href="bootstrap.css" type="text/css" media="screen" title="no title" charset="utf-8">
       <style type="text/css">
      body {
        padding-top: 60px;
      }
    </style>
    
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>

<script type="text/javascript">
jQuery.noConflict();
</script>

<script type="text/javascript" src="js/highcharts.js"></script>
<script type="text/javascript" src="js/modules/exporting.js"></script>
<script type="text/javascript" src="js/themes/gray.js"></script>

<script type="text/javascript">
<!-- A SIMPLE SPACE WILL ENABLE 'WORD WRAPPING' IN LABELS-->
		var activityChart;
                var activityOptions;
                
                function updateActivity(activityData, activityLabels){
                        activityChart.xAxis[0].setCategories(activityLabels);
                        activityChart.series[0].setData(activityData);
                };
		function loadActivity(activityData, activityLabels) {
				activityOptions = { chart: {//DO NOT CHANGE THIS VARIABLE NAME. IT IS A VARIABLE.
					renderTo: 'activityContainer',
					defaultSeriesType: 'bar'
				},
				title: {
					text: 'Recent Activity'
				},
				xAxis: {
					categories: activityLabels
				},
				yAxis: {
					min: 0,
					title: {
						text: 'Frequency',
						align: 'high'
					}
				},
				tooltip: {
					formatter: function() {
						return ''+this.x +': '+ this.y;
					}
				},
				plotOptions: {
					bar: {
						dataLabels: {
							enabled: true
						}
					}
				},
				legend: {
					layout: 'vertical',
					align: 'right',
					verticalAlign: 'top',
					x: -100,
					y: 100,
					floating: true,
					borderWidth: 1,
					backgroundColor: Highcharts.theme.legendBackgroundColor || '#FFFFFF',
					shadow: true
				},
				credits: {
					enabled: false
				},
			        series: [{
					data: activityData
				}]
			}

                        activityChart = new Highcharts.Chart(activityOptions);
			
			
		};
                
                var compilesChart;
                var compilesOptions;
                
                function updateCompiles(compilesData, compilesLabels){
                        compilesChart.xAxis[0].setCategories(compilesLabels);
                        compilesChart.series[0].setData(compilesData);
                };
		function loadCompiles(compilesData, compilesLabels) {
			compilesOptions = {chart: {//DO NOT CHANGE THIS VARIABLE NAME. IT IS A VARIABLE.
					renderTo: 'compilesContainer',
					defaultSeriesType: 'bar'
				},
				title: {
					text: 'Recent Compiles'
				},
				xAxis: {
					categories: compilesLabels
				},
				yAxis: {
					min: 0,
					title: {
						text: 'Frequency',
						align: 'high'
					}
				},
				tooltip: {
					formatter: function() {
						return ''+ this.x +': '+ this.y;
					}
				},
				plotOptions: {
					bar: {
						dataLabels: {
							enabled: true
						}
					}
				},
				legend: {
					layout: 'vertical',
					align: 'right',
					verticalAlign: 'top',
					x: -100,
					y: 100,
					floating: true,
					borderWidth: 1,
					backgroundColor: Highcharts.theme.legendBackgroundColor || '#FFFFFF',
					shadow: true
				},
				credits: {
					enabled: false
				},
			        series: [{
					data: compilesData
				}]
			}		

                        compilesChart = new Highcharts.Chart(compilesOptions);	
		};

/**
 * Request data from the server, add it to the graphs and set a timeout to request again
 */
function updateChartData(){
    /* call the php that has the php array which is json_encoded */
    $.getJSON('updateData.php', function(data) {
        /* data will hold the php arrays as a javascript object */
        updateActivity(data[0], data[1]);
        updateCompiles(data[0], data[1]);
    });
    setTimeout(updateChartData, 5000);
};
</script>
    <title>LabTracker-Live</title>   

</head>
<body>
    
    <div class="topbar">
      <div class="topbar-inner">
        <div class="container-fluid">
          <a class="brand" href="#">LabTracker Live</a>

          <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="liveClientView.html">Live View</a></li>
          </ul>
          <p class="pull-right">Logged in as <a href="#">username</a></p>

        </div>
      </div>
    </div>

      <!--black = 171717 23,23,23
      dark blue = 0C5A81 12,90,129
      light grey = D7E0E5 215,224,229
      white = FFFFFF 255,255,255
      orange = D84704 216,71,4
      -->
</div>
</div>
<div class="content">
<div class="span16">
  <h3>Useful information</h3>
  <p>Some useful information and such.</p>
</div>
<div class="row">
  <div class="span8" style="margin-right=10px;">
    <div id="activityContainer" class="highcharts-container" style="height:450px; margin: 0 2em; clear:both; min-width: 600px;"> </div>
  </div>
  <div class="span8 offset3">
    <div id="compilesContainer" class="highcharts-container" style="height:450px; margin: 0 2em; clear:both; min-width: 600px"> </div>
  </div>
</div>
</div>
<script>
loadActivity([],[]);
loadCompiles([],[]);
updateChartData();
</script>
</body>
</html>


<!--
loadCompiles([0], ['boo']);
drawCompiles();
loadActivity([0], ['boo']);
drawActivity();
var i=0;
function incI(){
i = i+1;
updateCompiles([i, 3], ['jack', 'jill']);
updateActivity([6, 7, i], ['abbatu:l?+-huhasuh', 'Hy my name is kyle Wen!tuhsau09', '34753498274874593472']);
}
jQuery(window).ready(function(){
incI();
});
setInterval(incI, 5000);-->
