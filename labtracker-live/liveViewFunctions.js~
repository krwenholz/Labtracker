/**
* Fetches data from the server.
*/
fetchData = function(){
    request = new XMLHttpRequest();
    request.onreadystatechange = function(){
	if(request.readyState == 4){
	    HandleResponse(request.responseText);
        }
    }request.open("POST", "databaseUpdate.php", true);
    request.send();
}

HandleResponse = function(text){
    alert(text);
}


/**
* The onload function creates the chart
*/
window.onload = function(){
    var hbar1 = new RGraph.HBar(document.getElementByID('activityCanvas'), <?php print($activityData_string) ?>);
      //alert('chart initialized');
      hbar1.Set('chart.background.grid', true);
      hbar1.Set('chart.colors', ['D84704']);
      hbar1.Set('chart.text.color', '#171717');
      //alert('colors initialized');

      hbar1.Set('chart.labels', <?php print($activityLabels_string) ?>);

      hbar1.Set('chart.gutter.left', 275);
      hbar1.Set('chart.gutter.right', 10);
      hbar1.Set('chart.background.grid.autofit', true);
      hbar1.Set('chart.shadow', true);
      hbar1.Set('chart.shadow.color', 'gray');
      hbar1.Set('chart.shadow.offsetx', 0);
      hbar1.Set('chart.shadow.offsety', 0);
      hbar1.Set('chart.shadow.blur', 15);

      //alert("activities drawn");

    var hbar2 = new RGraph.HBar(document.getElementByID('compilesCanvas'), <?php print($compileData_string) ?>);
      //alert('chart initialized');
      hbar2.Set('chart.background.grid', true);
      hbar2.Set('chart.colors', ['D84704']);
      hbar2.Set('chart.text.color', '#171717');
      //alert('colors initialized');

      hbar2.Set('chart.labels', <?php print($compileLabels_string) ?>);
      //alert('chart created');

      hbar2.Set('chart.gutter.left', 275);
      hbar2.Set('chart.gutter.right', 10);
      hbar2.Set('chart.background.grid.autofit', true);
      hbar2.Set('chart.shadow', true);
      hbar2.Set('chart.shadow.color', 'gray');
      hbar2.Set('chart.shadow.offsetx', 0);
      hbar2.Set('chart.shadow.offsety', 0);
      hbar2.Set('chart.shadow.blur', 15);

      if (RGraph.isIE8()) {
	  hbar1.Draw();
	  hbar2.Draw();
      } else {
	  RGraph.Effects.HBar.Grow(hbar1);
	  RGraph.Effects.HBar.Grow(hbar2);
      }//alert("compiles drawn");
}